# FruitShop 商品一覧の実装

ウェブアプリケーションで商品一覧を表示する際、以下のような手順で処理されます。


1. **コントローラーの作成**  
 商品一覧を取得するための `index` アクションを実装します。

1. **ビューの作成**  
 商品一覧を表示するための `index.html.erb` ビューを作成します。

1. **ルーティングの設定**  
 商品一覧ページへのルーティングを設定します。

このように、商品一覧機能には「データベースの準備」「モデルの作成」「コントローラーの作成」「ビューの作成」「ルーティングの設定」のステップが含まれます。  
それでは、各ステップを実装するための流れを詳しく見ていきましょう。

## 実装の流れ

ウェブアプリで商品一覧を表示するためには、以下の手順で実装を進めます。


### 3. コントローラーの作成

商品一覧を表示する `ProductsController` を作成します。

```ruby
# app/controllers/products_controller.rb
class ProductsController < ApplicationController
  def index
    @products = Product.all
  end
end
```
<details>
<summary>現在の商品コントローラー</summary>

```ruby
class ProductsController < ApplicationController
  def new
    # 新しい商品を作成するための空のインスタンスを用意
    @product = Product.new
  end

  def create
    # フォームから送られたデータを元に新しい商品を作成
    @product = Product.new(product_params)
    
    # データをデータベースに保存する
    if @product.save
      # 成功した場合、トップページへリダイレクト
      redirect_to root_path
    else
      # 失敗した場合、フォームを再表示
      render :new
    end
  end

  def index
    # 商品一覧を取得
    @products = Product.all
  end

  private
  # ストロングパラメータで、フォームから送信されたデータを許可する
  def product_params
    params.require(:product).permit(:name, :description, :price)
  end
end
```

</details>

### 4. ビューの作成

商品一覧を表示する `index.html.erb` を作成します。

```erb
<!-- app/views/products/index.html.erb -->
<% @products.each do |product| %>
  <div>
    <p>商品名: <%= product.name %></p>
    <p>価格: <%= product.price %>円</p>
    <p>説明: <%= product.description %></p>
  </div>
<% end %>
```

### 5. ルーティングの設定

商品一覧ページへのルーティングを設定します。

```diff
+ get 'products' => 'products#index' 
```

```ruby
# app/config/routes.rb
Rails.application.routes.draw do
  get 'products/new'  # 商品投稿フォームを表示
  post 'products' => 'products#create'  # 商品を保存する
  get 'products' => 'products#index'  # 商品一覧を表示する
end
```

### まとめ

- `ProductsController` の `index` アクションの実装
- 商品一覧を表示する `index.html.erb` の作成
- ルーティングの設定

これにより、FruitShop の商品一覧ページを適切に表示できるようになります。

