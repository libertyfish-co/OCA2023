# アプリケーション作成

## 目次
- [アプリケーションの準備](#アプリケーションの準備)
  - [アプリケーションの作成](#アプリケーションの作成)
  - [必要なプラグインの追加](#必要なプラグインの追加)
  - [サーバーを立ち上げる](#サーバーを立ち上げる)
- [トップページの作成](#トップページの作成)
  - [トップページの作成](#トップページの作成)
  - [トップページの確認](#トップページの確認)
  - [サーバーの停止方法](#サーバーの停止方法)
- [画像の管理](#画像の管理)
  - [ActiveStorageのインストール](#ActiveStorageのインストール)
  - [Railsで画像サイズの変更を行う](#Railsで画像サイズの変更を行う)
  - [画像を用意](#画像を用意)
- [まとめ](#まとめ)

---

## アプリケーションの準備
### アプリケーションの作成

まず、FruiteShopという名前のアプリケーションを作成します。ターミナルで以下のコマンドを実行してください。

```bash
rails new fruite_shop
```

次に、作成したアプリケーションのディレクトリに移動します。

```bash
cd fruite_shop
```

これで、まっさらな状態のRailsアプリケーションが準備できました。

### 必要なプラグインの追加

次に、FruiteShopを動作させるために必要なプラグインを追加します。以下のコマンドを実行して、yarnで必要なプラグインをインストールします。

```bash
yarn add @babel/plugin-proposal-private-methods @babel/plugin-proposal-private-property-in-object
```

これで、Railsアプリケーションに必要な設定が完了します。

### サーバーを立ち上げる

アプリケーションの作成が完了したら、サーバーを立ち上げて、Railsアプリケーションの初期画面が表示されるか確認しましょう。以下のコマンドでサーバーを起動します。

```bash
rails server
```

ブラウザで [http://localhost:3000](http://localhost:3000) にアクセスし、Railsの初期画面が表示されれば成功です。

<!-- 成功時の画像を挿入する -->

## トップページの作成

### トップページの作成

トップページを作成します。homesというコントローラを作成し、その中にtopアクションを追加します。以下のコマンドでコントローラを作成します。

```bash
rails generate controller homes top
```

次に、ルーティングを設定します。`config/routes.rb`を以下のように修正します。

```ruby
Rails.application.routes.draw do
   root to: "homes#top"
end
```

これで、トップページが表示されるようになります。

### トップページの確認

ブラウザで [http://localhost:3000](http://localhost:3000) にアクセスし、「Topページ」などの文字列を表示してみましょう。これでトップページが正しく表示されていれば、問題ありません。

### サーバーの停止方法

サーバーを停止するには、ターミナルで `Ctrl+C` を押します。以下のメッセージが表示され、サーバーが停止します。

```
^C- Gracefully stopping, waiting for requests to finish
=== puma shutdown: 2021-09-09 03:37:34 +0000 ===
- Goodbye!

Exiting
```

サーバーを再起動するには、再度以下のコマンドを実行します。

```bash
rails server
```

情報がうまく更新されないなどのエラーが発生した場合は、一度「Ctrl+Cを押してサーバーを停止」→「rails serverを入力してサーバーを起動」を試してみてください。

## 画像の管理

### ActiveStorageのインストール

次に、画像の管理を行うためにActiveStorageをインストールします。以下のコマンドを実行して、インストールを行います。

```bash
rails active_storage:install
rails db:migrate
```

これで、画像のアップロードと管理ができるようになります。

### Railsで画像サイズの変更を行う

Railsで画像のサイズ変更を行うために、`image_processing`というGemを導入します。`Gemfile`に以下のように記述し、`bundle install`を実行します。

```ruby
gem 'image_processing', '~> 1.2'
```

その後、以下のコマンドでインストールを完了させます。

```bash
bundle install
```

### 画像を用意

<!-- サンプルの画像を用意する -->

使用する画像ファイルをダウンロードし、`app/assets/images`フォルダに配置します。これにより、サイト内で画像を表示することができます。

### まとめ

このチュートリアルでは、以下の手順を通じてFruiteShopアプリケーションを作成しました。

1. **アプリケーションの作成**: `rails new` コマンドを使用して新しいRailsアプリケーションを作成しました。
2. **必要なプラグインの追加**: `yarn add` コマンドを使用して必要なプラグインをインストールしました。
3. **サーバーの起動**: `rails server` コマンドを使用してサーバーを起動し、ブラウザで初期画面を確認しました。
4. **トップページの作成**: コントローラを生成し、ルーティングを設定してトップページを作成しました。
5. **サーバーの停止方法**: `Ctrl+C` を使用してサーバーを停止する方法を学びました。
6. **ActiveStorageのインストール**: 画像の管理を行うためにActiveStorageをインストールし、データベースをマイグレートしました。
7. **画像サイズの変更**: `image_processing` Gemを導入し、画像のサイズ変更を行う設定をしました。
8. **画像の用意**: 使用する画像ファイルをダウンロードし、`app/assets/images`フォルダに配置しました。
9. **データベース設計**: 商品情報やカテゴリ、ユーザー情報などを格納するためのデータベース設計を行いました。

