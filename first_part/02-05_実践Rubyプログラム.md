# 2 実践Rubyプログラム

## 目次

+ [作ってみよう](#作ってみよう)
    + [シンプルな計算プログラム](#シンプルな計算プログラム)

## 作ってみよう

より実践的なプログラミングの題材を用意しました。プログラムの**要件**と**期待する出力例**をもとに、フローを考えたり、必要なメソッドなライブラリ調べながら進めてみましょう！

### シンプルな計算プログラム

#### **プログラムの要件**  
- ユーザーから2つの整数を入力として受け取る  
- それらの和、差、積、商を計算する  
- 計算結果を見やすい形式で出力する  
- 商は整数で表示する（小数点以下切り捨て）

#### **期待する出力例**
```sh
1つ目の数字を入力してください: 10
2つ目の数字を入力してください: 3
和: 13
差: 7
積: 30
商: 3
```

<details>
<summary>コード例・解説</summary>

```ruby
puts "1つ目の数字を入力してください:"
num1 = gets.to_i

puts "2つ目の数字を入力してください:"
num2 = gets.to_i

puts "和: #{num1 + num2}"
puts "差: #{num1 - num2}"
puts "積: #{num1 * num2}"
puts "商: #{num1 / num2}"
```

このプログラムでは、ユーザーから2つの整数を入力として受け取り、それらの基本的な四則演算（加算、減算、乗算、除算）を行います。

1. **入力の取得**
    ```ruby
    puts "1つ目の数字を入力してください:"
    num1 = gets.to_i
    ```
    - `puts` を使ってユーザーに入力を求めます。
    - `gets` で入力を取得し、`.to_i` を使って整数に変換します（`gets` の戻り値は文字列なので、数値計算のために変換が必要）。

1. **演算の実行**
    ```ruby
    puts "和: #{num1 + num2}"
    puts "差: #{num1 - num2}"
    puts "積: #{num1 * num2}"
    puts "商: #{num1 / num2}"
    ```
    - `+` は加算、`-` は減算、`*` は乗算、`/` は除算を行います。
    - `#{}` を使うことで、文字列の中に計算結果を埋め込むことができます。
    - `/` 演算子を使うと整数同士の割り算になるため、小数点以下は自動的に切り捨てられます。

1. **出力の形式**
    - `puts` を使うことで、それぞれの計算結果を分かりやすく表示できます。
    - `和: 13` のように、結果の前にラベルをつけることで見やすくなります。

#### 発展
要件には含まれていませんが、現在のプログラムでは2つ目の数値 `num2` が0のとき、除算（`num1 / num2`）でエラーが発生します。  
これを防ぐために、除算の前にゼロチェックを行うのも良い改善点です。

```ruby
if num2 != 0
puts "商: #{num1 / num2}"
else
puts "0で割ることはできません"
end
```

</details>

<br>

---

### 顧客情報の登録プログラム

#### **要件**  
- ユーザーに名前、年齢、住所、電話番号を順番に入力として受け取る
- それらの情報をハッシュ（辞書型）に格納する
- 入力された情報を整形して「顧客情報」として表示する

#### **期待する出力例**
```sh
名前を入力してください: 山田 太郎
年齢を入力してください: 30
住所を入力してください: 東京都渋谷区
電話番号を入力してください: 090-1234-5678

顧客情報:
名前: 山田 太郎
年齢: 30
住所: 東京都渋谷区
電話番号: 090-1234-5678
```

<details>
<summary>コード例・解説</summary>

```ruby
puts "名前を入力してください:"
name = gets.chomp

puts "年齢を入力してください:"
age = gets.to_i

puts "住所を入力してください:"
address = gets.chomp

puts "電話番号を入力してください:"
phone = gets.chomp

customer_info = {
    name: name,
    age: age,
    address: address,
    phone: phone
}

puts "\n顧客情報:"
customer_info.each do |key, value|
    puts "#{key.capitalize}: #{value}"
end
```

1. **入力の取得**  
`gets.chomp` は入力値から改行コードを削除するために使います。`gets` だけだと入力の最後に改行が含まれるので、`chomp` を使ってそれを取り除きます。
`gets.to_i` は整数を入力として受け取るために使います。年齢を整数で処理するためです。

1. **ハッシュに格納**  
顧客情報は `customer_info` というハッシュに格納します。ハッシュを使うことで、名前や年齢、住所などをそれぞれのキーに対応させて管理できます。
例えば、`name: name` という形で、入力された名前をハッシュの `:name` キーに保存します。

1. **情報の表示**  
`each` メソッドを使って、ハッシュのキーと値を一つずつ取り出し、整形して表示します。
`key.capitalize` を使って、キー（例えば `name`）の先頭文字を大文字にして表示します。

#### 発展

+ **バリデーション**  
ユーザーの入力が正しい形式かをチェックするバリデーションを追加すると、より実用的なプログラムになります。例えば、年齢が0以下でないことをチェックしたり、電話番号の形式が正しいかを確認したりします。

+ **複数顧客の登録**  
1人の顧客だけでなく、複数の顧客情報を管理できるようにすると、より実践的なシステムに近くなります。

</details>

---

### ビンゴカード作成プログラム

#### 要件
+ ビンゴカードは5×5のマスから構成され、各マスには1～75の数字がランダムに配置される
+ 中央のマス（3行3列）は「FREE」とし、他のマスには1～75の数字が重複しないように配置する
+ ビンゴカードを表示する

#### 期待する出力例
```ruby
ビンゴカード:
-------------------------
|  5  | 23  | 45  | 67  |  9  |
-------------------------
| 34  | 20  | 52  |  7  | 36  |
-------------------------
| 61  |  3  | FREE | 12  | 40  |
-------------------------
|  8  | 55  | 33  | 21  | 60  |
-------------------------
| 48  | 36  | 17  | 41  |  2  |
-------------------------
```

<details>
<summary>コード例・解説</summary>

```ruby
# ビンゴカードの作成プログラム

# 1～75の数字をランダムにシャッフル
numbers = (1..75).to_a.shuffle

# 5×5のビンゴカードを作成
bingo_card = Array.new(5) { Array.new(5) }

# 中央のマスは「FREE」
bingo_card[2][2] = "FREE"

# 残りのマスにランダムな数字を配置
index = 0
for i in 0..4
  for j in 0..4
    if bingo_card[i][j] != "FREE"
      bingo_card[i][j] = numbers[index]
      index += 1
    end
  end
end

# ビンゴカードを表示
puts "ビンゴカード:"
puts "-" * 25
bingo_card.each do |row|
  row.each do |cell|
    print "|", cell.to_s.rjust(3)
  end
  puts "|"
  puts "-" * 25
end
```

1. **数字のシャッフル**  
`numbers = (1..75).to_a.shuffle` で、1から75までの数字をシャッフルしてランダムに並べます。

1. **ビンゴカードの初期化**  
`Array.new(5) { Array.new(5) }` を使って、5×5の空のビンゴカードを作成します。

1. **中央マスの設定**  
`bingo_card[2][2] = "FREE"` で、中央のマスに「FREE」を設定します。

1. **ランダムな数字の配置**  
`index` という変数を使って、シャッフルした数字を順番に配置します。中央のマスは「FREE」なので、それ以外のマスに数字を配置します。

1. **ビンゴカードの表示**  
`puts "-" * 25` でビンゴカードを区切り線で整え、`print` を使って各セルの内容を表示します。`rjust(3)` でセル内の数字を右寄せして見やすくします。


</details>