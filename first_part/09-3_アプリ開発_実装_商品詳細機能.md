# FruitShop 商品詳細の実装

ウェブアプリケーションで商品詳細を表示する際、以下のような手順で処理されます。

1. **コントローラーの作成**  
 商品詳細を取得するための `show` アクションを実装します。

1. **ビューの作成**  
 商品詳細を表示するための `show.html.erb` ビューを作成します。

1. **ルーティングの設定**  
 商品詳細ページへのルーティングを設定します。

このように、商品詳細機能には「データベースの準備」「モデルの作成」「コントローラーの作成」「ビューの作成」「ルーティングの設定」のステップが含まれます。  
それでは、各ステップを実装するための流れを詳しく見ていきましょう。

## 実装の流れ

ウェブアプリで商品詳細を表示するためには、以下の手順で実装を進めます。

### 1. コントローラーの作成

商品詳細を表示する `ProductsController` を作成します。

```ruby
# app/controllers/products_controller.rb
class ProductsController < ApplicationController
  def show  # 商品詳細を取得
    @product = Product.find(params[:id])
  end
end
```

<details>
<summary>完成形の商品コントローラー</summary>

```ruby
class ProductsController < ApplicationController
  def new
    @product = Product.new
  end

  def create
    @product = Product.new(product_params)
    
    if @product.save
      redirect_to root_path
    else
      render :new
    end
  end

  def index
    @products = Product.all
  end

  def show
    @product = Product.find(params[:id])
  end

  private
  def product_params
    params.require(:product).permit(:name, :description, :price)
  end
end
```

</details>


### 2. ビューの作成

商品詳細を表示する `show.html.erb` を作成します。

```erb
<!-- app/views/products/show.html.erb -->
<div>
  <p>商品名: <%= @product.name %></p>
  <p>価格: <%= @product.price %>円</p>
  <p>説明: <%= @product.description %></p>
</div>
```

### 3. ルーティングの設定

商品詳細ページへのルーティングを設定します。

```diff
+ get 'products/:id' => 'products#show', as: 'product'
```

```ruby
# app/config/routes.rb
Rails.application.routes.draw do
  get 'products/new'  # 商品投稿フォームを表示
  post 'products' => 'products#create'  # 商品を保存する
  get 'products' => 'products#index'  # 商品一覧を表示する
  get 'products/:id' => 'products#show', as: 'product'  # 商品詳細を表示する
end
```
> **メモ：ルーティングの as オプション**  
> `as: 'product'` は、Railsのルーティングで特定のルートに名前を付けるオプションです。  
> 例えば、`get 'products/:id' => 'products#show', as: 'product'` と設定すると、`product_path(@product)` のように名前付きルートを使用できます。  
> これにより、コードの可読性と保守性が向上します。  

### まとめ

- `ProductsController` の `show` アクションの実装
- 商品詳細を表示する `show.html.erb` の作成
- ルーティングの設定

これにより、FruitShop の商品詳細ページを適切に表示できるようになります。