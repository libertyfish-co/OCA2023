## Ruby on Rails：MVC基礎

## 目次

- [MVCの基本的な知識](#mvcの基本的な知識)  


## MVCの基本的な知識

### MVCとは？

<img src="./images/4-6-1.png" width= "600px">

**Model**（モデル）、**View**（ビュー）、**Controller**（コントローラー）の頭文字を取った言葉です。  
**システム設計**方法の一つで、**データ**（Model）、**表示**（View）、**操作**（Controller）の3つに分けて考える方法です。



#### Model

**Model**は、アプリケーションの中で「**データを管理する役割**」を持っています。

*  アプリで使用するデータを保存したり、更新したり、**データの管理**をします。

*  必要なデータを**データベース**から取り出したり、保存したり、**データベースとのやり取り**をします。

* **ユーザー**の操作に基づいて、**必要な計算やデータの処理**をします。 


**Controller**がリクエストを受けて、**Model**に情報を渡します。  
Modelは情報をもとに**データベース**を操作したり、計算をしたりして、その結果をControllerに返します。

#### View
**View**は、アプリケーションの中で「**ユーザーが見る部分を表示する役割**」を持っています。  

* **ユーザー**が実際に目にする**画面**に表示される**情報**や**内容**を作ります。

* Webページに「商品名」、「価格」、「在庫数」などを表示しています。

* ボタンや入力欄など、ユーザーが操作するための要素を画面に配置します。

**Controller**が**Model**から受け取った処理されたデータを**View**は画面に表示しています。

#### Controller
**Controller**は、アプリケーションの中で「**ユーザーのリクエストに応じて、処理の流れを管理する役割**」を持っています。

* 購入する商品や入力欄の中身など、**ユーザーが入力したデータ**を、ボタンなどのアクションを通じて**リクエスト**として受け取ります。

* **ユーザーのリクエスト**に基づいて、Modelがどのように**データを処理すべきか**をControllerが決めます。

**Model**から**処理した結果**を受け取り、受け取ったデータを**View**に渡して、ユーザーに画面で表示させます。


### MVCの流れ

例えば、ショッピングサイトでカートに商品を追加するとどのようなMVCの流れになるでしょうか？

画像で置き換えます。

1.ユーザーが商品をカートに追加する。 コントローラーがリクエストを受け取る
2.コントローラーはリクエストを処理するためデータをモデルに渡す。
3.モデルは処理して（商品の情報をデータベースかとってくる）コントローラーに返す。
4.コントローラーがデータを受け取ってビューに渡して追加されたカートの名身を表示する画面を作成
5.ユーザーがその画面を見る。





















<br>
【DRY】
  `DRY`とは、"Don’t Repeat Yourself"の略称です。
  プログラミングを行う際に心がける理念の１つであり、
  "同じような記述を繰り返してはいけない"といった意味になります。

全く同じコードや似たようなコードがあちこちに散らばっていると、後々メンテナンスをする際に、全て変更するのに時間がかかったり、カバー漏れで不具合が出てしまうことになりかねません。
  そうならないためにも、出来るだけまとめられるものは一箇所にまとめて管理しておこう、という考え方です。
  <br>

【CoC】
`CoC`とは、"Convention over Configuration"の略称です。
意味は"設定より規約"で、従来のフレームワークのように設定を大量に記述するのではなく、
個々の設定に悩むより規約をあらかじめ決めておいて、開発者はロジックを考えることに専念できるようにしよう、というアプリ開発の思想の１つです。

具体的に言えば、Railsでは、あらかじめ名前付けのルールが用意されています。
例えば、次のコマンドを実行すると、ModelはUser(単数形)、DBのテーブル名はusers(複数形)で作成されるルールがあります。

```sh
$ rails generate model user
```

このような厳格なルールがあるため、命名規則等を熟考をしなくてよくなるだけでなく、
アプリの構造自体がシンプルになったり、他の開発者との意思疎通が容易になったりと、良い面が多くあります。
<br>

Railsにはこれらを補助する機能が備わっています。
活用していけば、とても心強い味方になってくれるでしょう。