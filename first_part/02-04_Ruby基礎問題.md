# 2 Ruby基礎

##	問題
1. 変数xに整数10を代入し、その値を出力してください。
    <details>
    <summary>解答例</summary>

    ```rb
    x = 10
    puts x
    ```

    </details>
1. 変数nameに文字列"Alice"を代入し、その値を出力してください。
    <details>
    <summary>解答例</summary>

    ```rb
    name = "Alice"
    puts name
    ```

    </details>
1. 2つの整数aとbの和を計算して出力してください。(a = 5, b = 3とします)
    <details>
    <summary>解答例</summary>

    ```rb
    a = 5
    b = 3
    sum = a + b
    puts sum
    ```

    </details>
1. 文字列"Hello, "と文字列"World!"を連結して出力してください。
    <details>
    <summary>解答例</summary>

    ```rb
    greeting = "Hello, " + "World!"
    puts greeting
    ```

    </details>
1. 配列[1, 2, 3]の3番目の要素を出力してください。
    <details>
    <summary>解答例</summary>

    ```rb
    arr = [1, 2, 3]
    puts arr[2]
    ```

    </details>
1. ハッシュ{name: "John", age: 30}のageの値を出力してください。
    <details>
    <summary>解答例</summary>

    ```rb
    info = {name: "John", age: 30}
    puts info[:age]
    ```

    </details>
1. if文を使用して、変数numが偶数か奇数かを判定し、結果を出力してください。 (num = 6とします)
    <details>
    <summary>解答例</summary>

    ```rb
    num = 6
    if num % 2 == 0
        puts "Even"
    else
        puts "Odd"
    end
    ```

    </details>
1. forループを使用して、配列[1, 2, 3, 4, 5]の各要素を出力してください。
    <details>
    <summary>解答例</summary>

    ```rb
    arr = [1, 2, 3, 4, 5]
    for item in arr
        puts item
    end
    ```

    </details>
1. whileループを使用して、変数iが10未満の場合にiを出力し、iをインクリメントしてください。
    <details>
    <summary>解答例</summary>

    ```rb
    i = 0
    while i < 10
        puts i
        i += 1
    end
    ```

    </details>
1. メソッドaddを定義し、引数xとyの和を返すようにしてください。 (x = 3, y = 5とします)
    <details>
    <summary>解答例</summary>

    ```rb
    def add(x, y)
        return x + y
    end

    puts add(3, 5)
    ```

    </details>
1. クラスPersonを定義し、initializeメソッドで名前と年齢を受け取ってインスタンス変数に代入してください。
    <details>
    <summary>解答例</summary>

    ```rb
    class Person
        def initialize(name, age)
            @name = name
            @age = age
        end
    end

    person = Person.new("Alice", 30)
    ```

    </details>
1. クラスCalculatorを定義し、addメソッドとsubtractメソッドを実装してください。 (addは2つの引数の和を返し、subtractは2つの引数の差を返します)
    <details>
    <summary>解答例</summary>

    ```rb
    class Calculator
        def add(x, y)
            return x + y
        end

        def subtract(x, y)
            return x - y
        end
    end

    calc = Calculator.new
    puts calc.add(5, 3)
    puts calc.subtract(5, 3)
    ```

    </details>
1. モジュールUtilsを定義し、その中にgreetメソッドを実装してください。greetメソッドは引数nameを受け取り、"Hello, #{name}!"という文字列を返します。
    <details>
    <summary>解答例</summary>
    
    ```rb
    module Utils
        def greet(name)
            return "Hello, #{name}!"
        end
    end

    class MyClass
        include Utils
    end

    obj = MyClass.new
    puts obj.greet("Alice")
    ```

    </details>
1. 三項演算子を使用して、変数numが偶数か奇数かを判定し、結果を出力してください。 (num = 7とします)
    <details>
    <summary>解答例</summary>

    ```rb
    num = 7
    puts num.even? ? "Even" : "Odd"
    ```

    </details>
1. 配列[1, 2, 3]から配列[3, 6, 9]をmapメソッドを使って生成してください。
    <details>
    <summary>解答例</summary>

    ```rb
    arr = [1, 2, 3]
    new_arr = arr.map { |x| x * 3 }
    puts new_arr
    ```

    </details>
1. ハッシュ{a: 1, b: 2, c: 3}からハッシュ{a: 2, b: 3, c: 4}をmapメソッド使って生成してください。
    <details>
    <summary>解答例</summary>

    ```rb
    hash = {a: 1, b: 2, c: 3}
    new_hash = hash.map { |key, value| [key, value + 1] }.to_h
    puts new_hash
    ```

    </details>
1. case文を使用して、変数gradeに応じて成績を出力してください。 (grade = "A"とします)
    <details>
    <summary>解答例</summary>

    ```rb
    grade = "A"
    case grade
    when "A"
        puts "Excellent"
    when "B"
        puts "Good"
    when "C"
        puts "Average"
    else
        puts "Poor"
    end
    ```

    </details>
1. クラスShapeを定義し、CircleクラスとRectangleクラスをそのサブクラスとしてください。
    <details>
    <summary>解答例</summary>

    ```rb
    class Shape
        # Shapeクラスの共通の振る舞いを定義
    end

    class Circle < Shape
        # Circleクラスの振る舞いを定義
    end

    class Rectangle < Shape
        # Rectangleクラスの振る舞いを定義
    end
    ```

    </details>
1. 変数numが5より大きい場合にのみ、"Number is greater than 5"というメッセージを出力してください。 (num = 8とします)
    <details>
    <summary>解答例</summary>

    ```rb
    num = 8
    puts "Number is greater than 5" if num > 5
    ```

    </details>
1. メソッドreverse_stringを定義して、reverseメソッドを使って文字列を逆順にして返してください。 ("hello"という文字列を"olleh"に変換します)
    <details>
    <summary>解答例</summary>

    ```rb
    def reverse_string(str)
        return str.reverse
    end

    puts reverse_string("hello")
    ```

    </details>
1. 配列[1, 2, 3]に対して、eachメソッドを使用して各要素を出力してください。
    <details>
    <summary>解答例</summary>

    ```rb
    arr = [1, 2, 3]
    arr.each { |x| puts x }
    ```

    </details>
1. ハッシュ{name: "Alice", age: 30}に対して、eachメソッドを使用してキーと値を出力してください。
    <details>
    <summary>解答例</summary>

    ```rb
    info = {name: "Alice", age: 30}
    info.each { |key, value| puts "#{key}: #{value}" }
    ```

    </details>
1. 配列[1, 2, 3, 4, 5]に対して、値の合計をinjectメソッドを使って計算して出力してください。
    <details>
    <summary>解答例</summary>

    ```rb
    arr = [1, 2, 3, 4, 5]
    sum = arr.inject(0) { |result, item| result + item }
    puts sum
    ```

    </details>
1. ハッシュ{a: 1, b: 2, c: 3}に対して、値の合計をinjectメソッドを使って計算して出力してください。
    <details>
    <summary>解答例</summary>

    ```rb
    hash = {a: 1, b: 2, c: 3}
    sum = hash.values.inject(0) { |result, item| result + item }
    puts sum
    ```

    </details>
1. メソッドfactorialを定義して、引数nの階乗を計算して返してください。 (n = 5とします)
    <details>
    <summary>解答例</summary>

    ```rb
    def factorial(n)
        return 1 if n == 0
        return n * factorial(n - 1)
    end

    puts factorial(5)
    ```

    </details>
1. 配列[1, 2, 3, 4, 5]の各要素を2倍した新しい配列をmapメソッドを使って生成してください。
    <details>
    <summary>解答例</summary>

    ```rb
    arr = [1, 2, 3, 4, 5]
    new_arr = arr.map { |x| x * 2 }
    puts new_arr
    ``` 

    </details>
1. 文字列"Ruby"の各文字を含む配列をcharsメソッドを使って生成してください。
    <details>
    <summary>解答例</summary>

    ```rb
    str = "Ruby"
    arr = str.chars
    puts arr
    ```

    </details>
1. 配列[1, 2, 3, 4, 5]の値が偶数の要素のみを含む新しい配列をselectメソッドを使って生成してください。
    <details>
    <summary>解答例</summary>

    ```rb
    arr = [1, 2, 3, 4, 5]
    new_arr = arr.select { |x| x.even? }
    puts new_arr
    ```

    </details>
1. ハッシュ{a: 1, b: 2, c: 3}の要素のうち、値が偶数のキーと値のペアを含む新しいハッシュをselectメソッドを使って生成してください。
    <details>
    <summary>解答例</summary>
    
    ```rb
    hash = {a: 1, b: 2, c: 3}
    new_hash = hash.select { |key, value| value.even? }
    puts new_hash
    ```

    </details>
1. メソッドpalindrome?を定義して、引数が回文かどうかをreverseを使って判定してください。 ("level"などの回文の場合にtrueを返します)
    <details>
    <summary>解答例</summary>

    ```rb
    def palindrome?(str)
        return str == str.reverse
    end

    puts palindrome?("level")
    ```

    </details>
1. 配列[1, 2, 3, 4, 5]をreverseメソッドを使って逆順にして出力してください。
    <details>
    <summary>解答例</summary>

    ```rb
    arr = [1, 2, 3, 4, 5]
    reversed_arr = arr.reverse
    puts reversed_arr
    ```

    </details>
1. メソッドremove_duplicatesを定義して、配列から重複を削除した新しい配列をuniqメソッドを使って生成してください。 ([1, 2, 2, 3, 4, 4, 5]などの配列から重複を削除します)
    <details>
    <summary>解答例</summary>

    ```rb
    def remove_duplicates(arr)
        return arr.uniq
    end

    puts remove_duplicates([1, 2, 2, 3, 4, 4, 5])
    ```

    </details>
1. 配列[1, 2, 3, 4, 5]の各要素を2乗した新しい配列をmapメソッドを使って生成してください。
    <details>
    <summary>解答例</summary>

    ```rb
    arr = [1, 2, 3, 4, 5]
    new_arr = arr.map { |x| x ** 2 }
    puts new_arr
    ```

    </details>
1. times文を使用して、奇数を1から順に10個出力してください。
    <details>
    <summary>解答例</summary>

    ```rb
    num = 1
    10.times do
        puts num
        num += 2
    end
    ```

    </details>
1. ハッシュ{a: 1, b: 2, c: 3}の各キーと値を出力してください。
    <details>
    <summary>解答例</summary>

    ```rb
    hash = {a: 1, b: 2, c: 3}
    hash.each { |key, value| puts "#{key}: #{value}" }
    ```

    </details>
1. メソッドprime?を定義して、引数が素数かどうかを判定してください。 (7などの素数の場合にtrueを返します)
    <details>
    <summary>解答例</summary>

    ```rb
    def prime?(num)
        return false if num <= 1

        (2...num).each do |i|
            return false if num % i == 0
        end

        return true
    end

    puts prime?(7)
    ```

    </details>
1. 1から100までの数を順番に出力します。ただし、以下の条件に当てはまる場合は代わりに文字列を出力します。
    - 数字が3で割り切れる場合は "Fizz" を出力します。
    - 数字が5で割り切れる場合は "Buzz" を出力します。
    - 数字が3と5の両方で割り切れる場合は "FizzBuzz" を出力します。
    <details>
    <summary>解答例</summary>

    ```rb
    def fizzbuzz
        (1..100).each do |num|
            if num % 3 == 0 && num % 5 == 0
                puts "FizzBuzz"
            elsif num % 3 == 0
                puts "Fizz"
            elsif num % 5 == 0
                puts "Buzz"
            else
                puts num
            end
        end
    end

    fizzbuzz
    ```

    </details>
1. 配列[1, 2, 3, 4, 5]を使って、最大値を求めて出力してください。ただし、maxメソッドを使用せず、自分で最大値を求めてください。
    <details>
    <summary>解答例</summary>

    ```rb
    arr = [1, 2, 3, 4, 5]
    max = arr[0]
    arr.each do |x|
        max = x if x > max
    end
    puts max
    ```

    </details>
1. 配列[1, 2, 3, 4, 5]を使って、最小値を求めて出力してください。ただし、minメソッドを使用せず、自分で最小値を求めてください。
    <details>
    <summary>解答例</summary>

    ```rb
    arr = [1, 2, 3, 4, 5]
    min = arr[0]
    arr.each do |x|
        min = x if x < min
    end
    puts min
    ```

    </details>
1. 正方形を描画するメソッドdraw_squareを作成してください。
    ```sh
    *****
    *****
    *****
    *****
    *****
    ```
    <details>
    <summary>解答例</summary>

    ```rb
    def draw_square(size)
        size.times do
            puts "*" * size
        end
    end

    draw_square(5)
    ```

    </details>
1. 長方形を描画するメソッドdraw_rectangleを作成してください。
    ```sh
    ******
    ******
    ******
    ******
    ```
    <details>
    <summary>解答例</summary>

    ```rb
    def draw_rectangle(width, height)
        height.times do
            puts "*" * width
        end
    end

    draw_rectangle(6, 4)
    ```

    </details>
1. 左下が直角の直角三角形を描画するメソッドdraw_left_bottom_triangleを作成してください。
    ```sh
    *
    **
    ***
    ****
    *****
    ```
    <details>
    <summary>解答例</summary>

    ```rb
    def draw_left_bottom_triangle(height)
        height.times do |i|
            puts "*" * (i + 1)
        end
    end

    draw_left_bottom_triangle(5)
    ```

    </details>
1. 右下が直角の直角三角形を描画するメソッド draw_right_bottom_triangleを作成してください。
    ```sh
        *
       **
      ***
     ****
    *****
    ```
    <details>
    <summary>解答例</summary>

    ```rb
    def draw_right_bottom_triangle(height)
        height.times do |i|
            puts " " * (height - i - 1) + "*" * (i + 1)
        end
    end

    draw_right_bottom_triangle(5)
    ```

    </details>
1. 三角形を描画するメソッドdraw_triangleを作成してください。
    ```sh
    *
    ***
    *****
    *******
    *********
    ```
    <details>
    <summary>解答例</summary>

    ```rb
    def draw_triangle(height)
        height.times do |i|
            puts " " * (height - i - 1) + "*" * (2 * i + 1)
        end
    end

    draw_triangle(5)
    ```

    </details>
1. ひし形を描画するメソッドdraw_diamondを作成してください。
    ```sh
        *
       ***
      *****
     *******
    *********
     *******
      *****
       ***
        *
    ```
    <details>
    <summary>解答例</summary>

    ```rb
    def draw_diamond(height)
        (1..height).each do |i|
            puts " " * (height - i) + "*" * (2 * i - 1)
        end
        (height - 1).downto(1) do |i|
            puts " " * (height - i) + "*" * (2 * i - 1)
        end
    end

    draw_diamond(5)
    ```

    </details>
1. 反転した直角三角形(左上が直角)を描画するメソッドdraw_left_top_triangleを作成してください。
    ```sh
    *****
    ****
    ***
    **
    *
    ```
    <details>
    <summary>解答例</summary>
    
    ```rb
    def draw_left_top_triangle(height)
        height.times do |i|
            puts "*" * (height - i)
        end
    end

    draw_left_top_triangle(5)
    ```

    </details>
1. 反転した直角三角形(右上が直角)を描画するメソッドdraw_right_top_triangleを作成してください。
    ```sh
    *****
     ****
      ***
       **
        *
    ```
    <details>
    <summary>解答例</summary>

    ```rb
    def draw_right_top_triangle(height)
        height.times do |i|
            puts " " * i + "*" * (height - i)
        end
    end

    draw_right_top_triangle(5)
    ```

    </details>
1. 反転した三角形を描画するメソッドdraw_inverted_triangleを作成してください。
    ```sh
    *********
     *******
      *****
       ***
        *
    ```
    <details>
    <summary>解答例</summary>

    ```rb
    def draw_inverted_triangle(height)
        height.times do |i|
            puts " " * i + "*" * (2 * (height - i) - 1)
        end
    end

    draw_inverted_triangle(5)
    ```

    </details>
1. うるう年を判定するメソッドleap_year?を作成してください。与えられた年がうるう年であればtrueを、そうでなければfalseを返します。以下の条件のときがうるう年です。  
    - 年が4で割り切れる場合はうるう年である。
    - 年が100で割り切れる場合はうるう年ではない。
    - 年が400で割り切れる場合はうるう年である。
    <details>
    <summary>解答例</summary>

    ```rb
    def leap_year?(year)
        (year % 4 == 0) && (year % 100 != 0 || year % 400 == 0)
    end

    puts leap_year?(2024)
    ```

    </details>
1. Personクラスを定義してください。このクラスにはnameというインスタンス変数があり、初期化時に引数として与えられた名前で設定されます。
    <details>
    <summary>解答例</summary>

    ```rb
    class Person
        attr_accessor :name

        def initialize(name)
            @name = name
        end
    end

    person = Person.new("Alice")
    puts person.name # => "Alice"
    ```

    </details>
1. 先ほどのPersonクラスにintroduceメソッドを追加してください。このメソッドは、インスタンスの名前を使って自己紹介を行います。
    <details>
    <summary>解答例</summary>

    ```rb
    class Person
        attr_accessor :name

        def initialize(name)
            @name = name
        end

        def introduce
            puts "Hello, my name is #{@name}."
        end
    end

    person = Person.new("Bob")
    person.introduce # => "Hello, my name is Bob."
    ```

    </details>
1. 先ほどのPersonクラスにcountというクラス変数を追加して、生成されたPersonオブジェクトの数を追跡してください。また、initializeメソッド内でcountの値を増やしてください。
    <details>
    <summary>解答例</summary>

    ```rb
    class Person
        @@count = 0
        attr_accessor :name

        def initialize(name)
            @name = name
            @@count += 1
        end

        def self.count
            @@count
        end
    end

    person1 = Person.new("Alice")
    person2 = Person.new("Bob")
    puts Person.count # => 2
    ```

    </details>
1. 先ほどのPersonクラスにaverage_name_lengthというクラスメソッドを追加して、生成されたPersonオブジェクトの名前の平均長を返してください。
    <details>
    <summary>解答例</summary>

    ```rb
    class Person
        @@count = 0
        @@total_name_length = 0
        attr_accessor :name

        def initialize(name)
            @name = name
            @@count += 1
            @@total_name_length += name.length
        end

        def self.average_name_length
            @@total_name_length / @@count
        end
    end

    person1 = Person.new("Alice")
    person2 = Person.new("Bob")
    puts Person.average_name_length # => 5
    ```

    </details>
1. Animalクラスを定義し、そのサブクラスとしてDogクラスを定義してください。Animalクラスにはnameというインスタンス変数があり、初期化時に引数として与えられた名前で設定されます。また、Animalクラスにはbarkメソッドを追加して"Woof"という文字列を出力して吠えさせてください。
    <details>
    <summary>解答例</summary>

    ```rb
    class Animal
        attr_accessor :name

        def initialize(name)
            @name = name
        end

        def bark
            puts "Woof!"
        end
    end

    class Dog < Animal
    end

    dog = Dog.new("Buddy")
    puts dog.name # => "Buddy"
    dog.bark # => "Woof!"
    ```

    </details>
1. 先ほどのDogクラスに、barkメソッドをオーバーライド(上書き)してください。オーバーライドされたメソッドは"Woof woof!"という文字列を出力します。
    <details>
    <summary>解答例</summary>

    ```rb
    class Dog < Animal
        def bark
            puts "Woof woof!"
        end
    end

    dog = Dog.new("Buddy")
    dog.bark # => "Woof woof!"
    ```

    </details>
1. Stringクラスにreverse_wordsというメソッドを追加し、文字列内の各単語を逆順にしてください。
    <details>
    <summary>解答例</summary>

    ```rb
    class String
        def reverse_words
            self.split.map(&:reverse).join(" ")
        end
    end

    puts "Hello world".reverse_words # => "olleH dlrow"
    ```

    </details>
1. Helperモジュールを定義し、その中にformat_nameメソッドを定義してください。このメソッドは与えられた名前をupcaseで大文字にして返します。次に、Person クラスにHelperモジュールをインクルードしてください。
    <details>
    <summary>解答例</summary>

    ```rb
    module Helper
        def format_name(name)
            name.upcase
        end
    end

    class Person
        include Helper
        attr_accessor :name

        def initialize(name)
            @name = format_name(name)
        end
    end

    person = Person.new("Alice")
    puts person.name # => "ALICE"
    ```

    </details>
1. 新たにPersonクラスにageインスタンス変数を追加し、それにアクセスするためのageメソッドを定義してください。
    <details>
    <summary>解答例</summary>

    ```rb
    class Person
        attr_accessor :name, :age

        def initialize(name, age)
            @name = name
            @age = age
        end
    end

    person = Person.new("Bob", 30)
    puts person.age # => 30
    ```

    </details>
1. 先ほどのPersonクラスに<=>演算子を実装してください。この演算子は、2つのPersonオブジェクトを比較し、年齢が同じであれば名前のアルファベット順に比較します。年齢が異なる場合は、年齢の若い方を優先します。
    <details>
    <summary>解答例</summary>

    ```rb
    class Person
        include Comparable
        attr_accessor :name, :age

        def initialize(name, age)
            @name = name
            @age = age
        end

        def <=>(other)
            return age == other.age ? name <=> other.name : age <=> other.age
        end
    end

    person1 = Person.new("Alice", 25)
    person2 = Person.new("Bob", 30)
    puts person1 < person2 # => true
    ```

    </details>
1. VehicleクラスとCarクラス、Convertibleモジュールを定義してください。以下の条件で作成してください。
    - Vehicleクラス「色」と「価格」という2つのインスタンス変数を初期化して代入、それをinfoメソッドで出力してください。
    - CarクラスはVehicleクラスを継承して、インスタンスを生成したときに「色」と「価格」に加え「車の車輪の数」を表すインスタンス変数を初期化して代入してください。
    - Carクラスのinfoメソッドでは、車の色、価格、車輪の数を出力します。
    - Convertibleモジュールにはtop_downメソッドがあり、車の屋根を開けることを示すメッセージを出力します。CarクラスにConvertibleモジュールを出力できるようにしてください。
    <details>
    <summary>解答例</summary>

    ```rb

    module Convertible
        def top_down
            puts "Opening the convertible top!"
        end
    end

    class Vehicle
        attr_accessor :color, :price

        def initialize(color, price)
            @color = color
            @price = price
        end

        def info
            puts "Color: #{@color}, Price: #{@price}"
        end
    end

    class Car < Vehicle
        attr_accessor :num_wheels

        def initialize(color, price, num_wheels)
            super(color, price)
            @num_wheels = num_wheels
        end

        def info
            super
            puts "Number of Wheels: #{@num_wheels}"
        end

        include Convertible
    end

    car = Car.new("Red", 20000, 4)
    car.info
    car.top_down
    ```

    </details>

1. 1から100までの数字を順に出力してください。ただし、3の倍数のときは"Fizz"、5の倍数のときは"Buzz"、3と5の両方の倍数のときは"FizzBuzz"と出力してください。

    + 出力例
        ```ruby
        1
        2
        Fizz
        4
        Buzz
        ...(続く)
        ```

    <details>
    <summary>解答例</summary>

    ```rb
    (1..100).each do |n|
        if n % 3 == 0 && n % 5 == 0
            puts "FizzBuzz"
        elsif n % 3 == 0
            puts "Fizz"
        elsif n % 5 == 0
            puts "Buzz"
        else
            puts n
        end
    end
    ```

    </details>